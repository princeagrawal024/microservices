package com.demo.moviecatalogservice.resources;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.demo.moviecatalogservice.model.CatalogItem;
import com.demo.moviecatalogservice.model.Rating;

@RestController
@RequestMapping("/catalog")
public class MovieCatalogResource {
	 
	 @RequestMapping("/{userID}")
	 public List<CatalogItem> getCatalog(@PathVariable("userID") String userID){
		 
		 
		 //get all the rated movie IDs from rating-data-service (3)
		 List<Rating> ratings = Arrays.asList(
				 new Rating("1234", 4),
				 new Rating("1122", 4)
				 );
		  
		 //For each movie ID, call movie info service and get details.
		  
		 List<CatalogItem>  list = new ArrayList<CatalogItem>();
		 for(Rating rating: ratings) {
			 list.add(new CatalogItem("Transformers", "Test", rating.getRating()));
			}
		 return list;
		 
		 //Put all them together
		 
		 
		 
	 }

}
